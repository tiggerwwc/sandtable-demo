(this["webpackJsonpsandtable-test"]=this["webpackJsonpsandtable-test"]||[]).push([[0],{27:function(e,t,a){e.exports=a(46)},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(19),r=a.n(l),i=(a(32),a(10)),c=a(7),s=a(47),d=(a(33),a(11)),m=a(13),u=a(2),h=a(9),v=function(e,t){var a,n,o,l,r,i=[],c=[],s=[],d={},m={x:-99999,y:-99999},u=(null===t||void 0===t?void 0:t.mode)||"random",h=0,v=["random","uniform","pattern"];window.particles=i;var b={random:["#FFF","#FFF"],uniform:["#FFF","#FFF"],drop:["#1d75cf","#3a5945"],ribbon:["#702744","#f98d00"]};function f(){if("fullscreen"===(null===t||void 0===t?void 0:t.screenMode))a.width=4*window.innerWidth,a.height=4*window.innerHeight;else if("halfscreen"===(null===t||void 0===t?void 0:t.screenMode)){var e=document.documentElement,n=document.querySelector(".sandtable-board");n&&(a.width=4*(null===n||void 0===n?void 0:n.clientWidth),a.height=4*(null===n||void 0===n?void 0:n.clientHeight),e.style.setProperty("--sand-w","".concat(null===n||void 0===n?void 0:n.clientWidth,"px")),e.style.setProperty("--sand-h","".concat(null===n||void 0===n?void 0:n.clientHeight,"px")))}else a.width=1920,a.height=1440;x()}function p(){return window.pageXOffset||window.document.documentElement.scrollLeft}function E(){return window.pageYOffset||window.document.documentElement.scrollTop}function g(e){e.preventDefault();var t=document.querySelector(".react-transform-element"),n=t?1/(t.getBoundingClientRect().width/t.offsetWidth)*4:1,o=e.pageX,l=e.pageY,r=p()+a.getBoundingClientRect().left,i=E()+a.getBoundingClientRect().top;m.x=(o-r)*n,m.y=(l-i)*n}var w=function(){m={x:-1e3,y:-1e3}},_=function(){w()};function y(e){e.preventDefault(),w()}function N(e){e.preventDefault(),m.x=e.touches[0].pageX-(p()+a.getBoundingClientRect().left),m.y=e.touches[0].pageY-(E()+a.getBoundingClientRect().top)}function O(e){if(e.preventDefault(),u=v[Math.max(0,--h)],s=[],0===h)return l.classList.remove("ip-nav-show"),void S("unbind","left");h===v.length-1&&(r.classList.add("ip-nav-show"),S("bind","right"))}function j(e){var t;(e.preventDefault(),u=v[Math.min(v.length,++h)],s=[],1===h)&&(null===(t=l)||void 0===t||t.classList.add("ip-nav-show"),S("bind","left"));if(h===v.length-1){var a,n;if(null===(a=r)||void 0===a?void 0:a.classList.contains("ip-nav-show"))null===(n=r)||void 0===n||n.classList.remove("ip-nav-show");S("unbind","right")}}function S(e,t){var a="left"===t?O:j;switch(e){case"bind":var n=document.querySelector(".ip-nav-".concat(t));n&&(n.addEventListener("touchstart",a,!1),n.addEventListener("click",a,!1),n.style.cursor="pointer");break;case"unbind":var o=document.querySelector(".ip-nav-".concat(t));o&&(o.removeEventListener("touchstart",a,!1),o.removeEventListener("click",a,!1),o.style.cursor="default")}}function x(){if([].forEach.call(i,(function(e,n){switch(u){case"random":d.x=e.initX,d.y=e.initY;break;case"uniform":case"pattern":var o=Math.floor(Math.sqrt(512)),l=Math.floor(e.stepCount/o),r=e.stepCount%o,i=a.width/o,c=a.height/o;d.x=l*i,d.y=r*c;break;case"ribbon":d.x=.5*a.width+90*Math.sin(n)*Math.cos(n),d.y=320+140*(-Math.sin(n)-1)}var s=.08*(1-e.friction);if(e.interactive)e.x-=(m.x-e.x)*s,e.y-=(m.y-e.y)*s,e.angle+=.08;else{var h=d.x-e.x,v=d.y-e.y;e.initialized&&!t.particlesBackToOrigin||(e.x+=h*s,e.y+=v*s,e.angle+=1e-4,e.initialized=h<.05&&v<.05)}})),s.length<c.length)for(var e=[].slice.call(c,s.length,c.length),n=0;n<e.length;n++)c.splice(n,1)}function C(){n.clearRect(0,0,a.width,a.height),x(),[].forEach.call(i,(function(e,t){if(e.alpha+=.05*(e.maxAlpha-e.alpha),e.hasBorn&&(e.radius+=(0-e.radius)*e.bornSpeed,0===Math.round(e.radius))){switch(u){case"random":e.color=b.random[~~(Math.random()*b.random.length)];break;case"uniform":e.color=b.uniform[~~(Math.random()*b.uniform.length)];break;case"pattern":var a=Math.floor(Math.sqrt(512)),n=Math.floor(e.stepCount/a),o=e.stepCount%a,l=Math.floor(a/2),r=Math.floor(.35*a),i=Math.floor(.85*a);if(o>r){var c=Math.abs(n-l);c*c/4>4*(i-o)&&(e.alpha=.1,e.maxAlpha=.1)}break;case"ribbon":e.color=b.ribbon[~~(Math.random()*b.ribbon.length)]}e.hasBorn=!1}e.hasBorn||(e.radius+=(e.maxRadius-e.radius)*e.bornSpeed,Math.round(e.radius)===e.maxRadius&&(e.hasBorn=!0));var s=function(e,t){var a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.sqrt(a*a+n*n)}(m,e)-e.radius;s<=240?(e.interactive=!0,e.friction=(s-120)/120,e.friction>.8&&(e.friction=1)):(e.interactive=!1,e.friction=0)})),[].forEach.call(i,(function(e,t){n.save(),n.globalAlpha=e.alpha,n.fillStyle=e.color,n.font="".concat(24,"px Lato, Arial, sans-serif"),n.fillText(e.char,e.x,e.y),n.beginPath(),n.fill(),n.restore()})),o=window.requestAnimFrame(C)}var k=function(e,t){return~~(Math.random()*(t-e+1)+e)},M=function(){var e=t.chars||["\u5b57"];return e[Math.floor(Math.random()*e.length)]};window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/660)},window.addEventListener("initCanvas",(function e(){window.removeEventListener("initCanvas",e,!1);var t,c=document.querySelector(".ip-slideshow"),s=document.querySelector("canvas");s&&(null===c||void 0===c||c.removeChild(s),a=null),a=document.createElement("canvas"),f(),null===c||void 0===c||c.appendChild(a),a.getContext&&a.getContext("2d")?(n=a.getContext("2d"),"ontouchmove"in window?(a.addEventListener("touchup",y,!1),a.addEventListener("touchmove",N,!1)):(a.addEventListener("mousemove",g,!1),a.addEventListener("mouseout",_,!1)),S("bind","left"),S("bind","right"),window.onresize=f,function(){for(var e=0;e<512;e++){var t,n,l=e/512,r=k(0,a.width),c=k(0,a.height);t=r,n=c-k(0,3*a.height);var s=k(0,1),d=!(s>0||s<12),m=b.random[~~(Math.random()*b.random.length)];i.push({friction:0,char:M(),initX:r,initY:c,x:t,y:n,hasBorn:d,ease:.04+.06*Math.random(),bornSpeed:.07+.07*Math.random(),alpha:0,maxAlpha:.4+.5*Math.random(),radius:s,maxRadius:3,color:m,interactive:!1,angle:0,steps:l,stepCount:e})}o&&window.cancelAnimationFrame(o);C()}(),l=document.querySelector(".ip-nav-left"),null===(t=r=document.querySelector(".ip-nav-right"))||void 0===t||t.classList.add("ip-nav-show")):console.error("Sorry, switch to a better browser to see this experiment.")}),!1)},b=(a(34),function(e){var t=e.chars,a=e.particlesBackToOrigin,l=e.mode,r=e.fullscreen,i=e.screenMode,c=void 0===i?"fullscreen":i;return console.log("SandTest2 rendered"),Object(n.useEffect)((function(){v(window,{chars:t,particlesBackToOrigin:a,mode:l,screenMode:r?"fullscreen":c}),function(){var e=document.createEvent("HTMLEvents");e.initEvent("initCanvas",!0,!0),e.eventName="initCanvas",document.dispatchEvent(e)}()}),[t,a,l,r,c]),o.a.createElement("div",{className:"sand-test-2"},o.a.createElement("div",{className:"ip-slideshow-wrapper"},o.a.createElement("div",{className:"ip-slideshow"})))}),f=(a(35),function(e){e.title,e.children;var t=Object(n.useState)(""),a=Object(u.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)(["\u9019\u4e0d\u662f","\u771f\u6b63\u7684","\u6587\u6848"]),c=Object(u.a)(i,2),s=c[0],v=c[1],f=Object(n.useState)(""),p=Object(u.a)(f,2),E=(p[0],p[1],Object(n.useState)(!0)),g=Object(u.a)(E,2),w=g[0],_=g[1],y=Object(n.useState)("random"),N=Object(u.a)(y,2),O=N[0],j=N[1],S=Object(n.useState)(!1),x=Object(u.a)(S,2),C=x[0],k=x[1],M=Object(n.useState)(""),F=Object(u.a)(M,2),T=F[0],L=F[1],A=Object(n.useState)(!1),B=Object(u.a)(A,2),q=B[0],z=B[1];Object(n.useEffect)((function(){L(s.join("___"))}),[s]),console.log("SandTest1 rendered");s.length;return o.a.createElement("div",{className:"sand-test ".concat(q?"is-fullscreen":"")},o.a.createElement("div",{className:"sand-test__body"},o.a.createElement("div",{className:"sand-test__board"},o.a.createElement("h2",null,"SAND TABLE TEST 1"),o.a.createElement("div",{className:"sand-board"},o.a.createElement(h.b,{defaultScale:1,options:{minScale:1,maxScale:4}},(function(e){var t=e.zoomIn,a=e.zoomOut,n=e.resetTransform;Object(d.a)(e,["zoomIn","zoomOut","resetTransform"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,null,o.a.createElement("div",{className:"sand-board__zoomer"},o.a.createElement("div",{className:"sand-board__body"},o.a.createElement(b,{chars:s,particlesBackToOrigin:w,mode:O,fullscreen:q})))),o.a.createElement("div",{className:"tools"},o.a.createElement("button",{type:"button",title:"Fullscreen",className:"fullscreen-btn",onClick:function(){return z(!q)}},"[ ]"),o.a.createElement("button",{type:"button",title:"Zoom In",onClick:t},"+"),o.a.createElement("button",{type:"button",title:"Zoom Out",onClick:a},"-"),o.a.createElement("button",{type:"button",title:"Reset Zoom",onClick:n},"x")))}))),o.a.createElement("nav",null,o.a.createElement("span",{className:"ip-nav-left"}),o.a.createElement("span",{className:"ip-nav-right"}))),o.a.createElement("div",{className:"sand-test__control"},o.a.createElement("div",{className:"sand-msg"},o.a.createElement("h3",null,"Messages"),C?o.a.createElement("div",{className:"sand-msg-editpanel"},o.a.createElement("textarea",{className:"sand-msg-textarea",onChange:function(e){return L(e.target.value)}},T),o.a.createElement("div",null,o.a.createElement("button",{className:"custom-button",type:"button",onClick:function(){return function(){var e=T.split("___");v(e),k(!1)}()}},"Save"),o.a.createElement("button",{className:"custom-button",type:"button",onClick:function(){return L(s.join("___")),void k(!1)}},"Cancel"))):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"".concat(s.join("___"),"..."),o.a.createElement("button",{className:"custom-button",type:"button",onClick:function(){return k(!0)}},"Edit")),o.a.createElement("div",{className:"sand-msg-input"},o.a.createElement("input",{type:"text",value:l,placeholder:"Leave your msg",onChange:function(e){return r(e.target.value)}}),o.a.createElement("button",{type:"button",onClick:function(){return v([].concat(Object(m.a)(s),[l])),void r("")}},"Submit")))),o.a.createElement("div",{className:"sand-options"},o.a.createElement("h3",null,"Options"),o.a.createElement("div",{className:"sand-option-group"},o.a.createElement("h4",{className:"sand-option-label"},"Particles move back?"),o.a.createElement("select",{onChange:function(e){return _("Y"===e.target.value)}},o.a.createElement("option",{value:"Y"},"Yes"),o.a.createElement("option",{value:"N"},"No"))),o.a.createElement("div",{className:"sand-option-group"},o.a.createElement("h4",{className:"sand-option-label"},"Particles Arrangement"),o.a.createElement("select",{onChange:function(e){return j(e.target.value)}},o.a.createElement("option",{value:"random"},"Random"),o.a.createElement("option",{value:"pattern"},"Pattern")))))))}),p=function(){Object(s.a)().t,Object(c.f)();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"demo-layout"},o.a.createElement("div",{className:"demo-layout__body"},o.a.createElement("h1",{className:"a11y-hidden"},"Sand Table"),o.a.createElement("main",{className:"demo-layout__content"},o.a.createElement(f,null)))))},E=(a(44),a(25)),g=(a(45),function(e){e.title,e.children;var t=Object(n.useState)(""),a=Object(u.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)(["\u9019\u4e0d\u662f","\u771f\u6b63\u7684","\u6587\u6848"]),c=Object(u.a)(i,2),s=c[0],v=c[1],f=Object(n.useState)(!0),p=Object(u.a)(f,2),g=p[0],w=(p[1],Object(n.useState)("pattern")),_=Object(u.a)(w,2),y=_[0],N=(_[1],Object(n.useState)(!1)),O=Object(u.a)(N,2),j=(O[0],O[1],Object(n.useState)("")),S=Object(u.a)(j,2),x=(S[0],S[1]),C=Object(n.useState)("halfscreen"),k=Object(u.a)(C,2),M=k[0],F=(k[1],Object(n.useState)(!1)),T=Object(u.a)(F,2),L=T[0],A=T[1],B=Object(n.useState)(0),q=Object(u.a)(B,2);q[0],q[1];Object(n.useEffect)((function(){x(s.join("___"))}),[s]),console.log("SandTable rendered");return o.a.createElement("div",{className:"sandtable is-".concat(M)},o.a.createElement("div",{className:"sandtable__body"},o.a.createElement("div",{className:"sandtable__board"},o.a.createElement("div",{className:"sandtable__head"},o.a.createElement("img",{className:"sandtable__logo-en",src:"/img/img-sandtable-title.svg",alt:""}),o.a.createElement("img",{className:"sandtable__logo-zh",src:"/img/img-sandtable-title-zh.svg",alt:""})),o.a.createElement("div",{className:"sandtable-board"},o.a.createElement(h.b,{defaultScale:1,options:{minScale:1,maxScale:4},onZoomChange:function(e){window.canvasZoom=(e.scale-1)/3*100}},(function(e){var t,a,n=e.zoomIn,l=e.zoomOut,r=(e.resetTransform,e.setScale);Object(d.a)(e,["zoomIn","zoomOut","resetTransform","setScale"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,null,o.a.createElement("div",{className:"sandtable-board__zoomer"},o.a.createElement("div",{className:"sandtable-board__body"},o.a.createElement(b,{chars:s,particlesBackToOrigin:g,mode:y,screenMode:M})))),o.a.createElement("div",{className:"tools-slider"},o.a.createElement("div",{className:"tools-slider__wrapper"},o.a.createElement(E.a,{className:"tools-slider__body",thumbClassName:"tools-slider__thumb",trackClassName:"tools-slider__track",renderThumb:function(e,t){return o.a.createElement("div",e,t.valueNow)},defaultValue:(null===(t=window)||void 0===t?void 0:t.canvasZoom)||0,value:(null===(a=window)||void 0===a?void 0:a.canvasZoom)||0,onChange:function(e){r(1+e/100*3)}})),o.a.createElement("button",{className:"tools-slider__zoom-out",type:"button",title:"Zoom Out",onClick:l},"-"),o.a.createElement("button",{className:"tools-slider__zoom-in",type:"button",title:"Zoom In",onClick:n},"+")))}))),o.a.createElement("nav",null,o.a.createElement("span",{className:"ip-nav-left"}),o.a.createElement("span",{className:"ip-nav-right"}))),o.a.createElement("div",{className:"sandtable__control"},o.a.createElement("div",{className:"sandtable__sidebar"},o.a.createElement("button",{type:"button",onClick:function(){return A(!L)},className:"sandtable__sidelink"},"About"),o.a.createElement("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"sandtable__sidelink"},"Support"),o.a.createElement("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"sandtable__sidelink"},"Follow Us")),o.a.createElement("div",{className:"sandtable__head"},o.a.createElement("div",null),o.a.createElement("div",{className:"sandtable__sitetitle"},o.a.createElement("span",null,"Write Together \u4e00\u8d77\u66f8\u5beb"))),o.a.createElement("div",{className:"sandtable-interact-panel"},o.a.createElement("div",{className:"sandtable-msg"},o.a.createElement("div",{className:"sandtable-msg__title"},"\u4e00\u8d77\u66f8\u5beb\u9999\u6e2f\u4e4b\u66f8 Let\u2019s continue the story of Hong Kong"),o.a.createElement("div",{className:"sandtable-msg__msgs",dangerouslySetInnerHTML:{__html:"<em>\u81f4\u9999\u6e2f To Hong Kong</em> <span></span> ".concat(s.join(" <span></span> "),"...")}}),o.a.createElement("div",{className:"sandtable-msg-input"},o.a.createElement("input",{type:"text",value:l,placeholder:"\u4e00\u8d77\u66f8\u5beb Write Together ",onChange:function(e){return r(e.target.value)}}),o.a.createElement("button",{type:"button",onClick:function(){return v([].concat(Object(m.a)(s),[l])),void r("")}},"Submit"))),o.a.createElement("div",{className:"sandtable-about ".concat(L?"is-active":"")},o.a.createElement("div",{className:"sandtable-scrollpane"},o.a.createElement("h3",{className:"sandtable-about__title"},"\u95dc\u65bc About"),o.a.createElement("div",{className:"sandtable-about__desc"},o.a.createElement("p",null,"Hong Kong is a nexus and a vessel for resonance between multiple cultures: if captured in words, it would be a co-authored, dynamic book of interactions, transcending time, and cultural differences."),o.a.createElement("p",null,"Visitors are invited to develop stories, dreams, and speculations on the histories and futures of Hong Kong as they encounter the urban legend of Ah Kwan Showing the Way, a fantasy concocted by early British colonialists. Combined with the materiality and notion of fortune-telling rituals, the audience will play a game of Chinese Whispers with this local legend as the basis, each day regenerating the past and producing a \u2018fortune\u2019 for the future."),o.a.createElement("p",null,"Captured in sand, visitors\u2019 written strokes will be projected in the mirroring sites and recorded over the duration of the exhibition to collate an archive of resonance on- site and online. The pavilion, therefore, presents an alternative archive, documenting the multiple, interwoven, non-linear histories of Hong Kong, and encouraging collective speculation beyond the rhetorical narratives of the city\u2019s future."))))))))}),w=function(){Object(s.a)().t,Object(c.f)();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"main-layout"},o.a.createElement("h1",{className:"a11y-hidden"},"Sand Table"),o.a.createElement("main",{className:"main-layout__body"},o.a.createElement(g,null))))},_=function(){return o.a.createElement(i.a,null,o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/:lang?/demo",component:p}),o.a.createElement(c.a,{exact:!0,path:"/:lang?",component:w})))},y=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.baaf0eb4.chunk.js.map